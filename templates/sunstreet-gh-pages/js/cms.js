var configApp={resultId:"#result",globalId:"#global",footerId:"#footer",postsId:"#posts",pagesId:"#pages",contactsId:"#contacts",postTempId:"#postTemp",pageTempId:"#pageTemp",contactTempId:"#contactTemp",sourceTxtareaSel:"#source > textarea",globalSlc:"section[id=global]",footerSlc:"section[id=footer]",pagesSlc:"section[id=pages] > div",postsSlc:"section[id=posts] > div",contactsSlc:"section[id=contacts] > div",validateBtnId:"#validateBtn",toSettingsBtnId:"#toSettingsBtn",toJSONBtnId:"#toJSONBtn",newPageId:"#newPage",newPostId:"#newPost",newContactId:"#newContact"},Jsn={},Actions={};Jsn.validate=function(){"use strict";try{var t=jsonlint.parse($(configApp.sourceTxtareaSel).val());t&&($(configApp.resultId).html("JSON is valid!, you can copy it to your content.json file"),$(configApp.resultId).attr("class","pass"),$(configApp.sourceTxtareaSel).val(JSON.stringify(t,null,"  ")))}catch(n){$(configApp.resultId).html(n),$(configApp.resultId).attr("class","fail")}},Jsn.extract=function(t){"use strict";var n={},c=$(t).find("span > input[type=text]"),o=$(t).find("span > textarea"),e=$(t).find("span > input[type=number]"),i=$(t).find("span > input[type=checkbox]"),s=$(t).find("span > input[type=date]");return c.each(function(){n[$(this).attr("name")]=$(this).val()}),o.each(function(){n[$(this).attr("name")]=$(this).val()}),e.each(function(){n[$(this).attr("name")]=$(this).val()}),i.each(function(){n[$(this).attr("name")]=this.checked}),s.each(function(){n[$(this).attr("name")]=$(this).val()}),n},Jsn.extractN=function(t){"use strict";var n={};return $(t).each(function(t){n[t]={},n[t]=Jsn.extract(this)}),n},Jsn.toJSON=function(){"use strict";var t={};return t.global=Jsn.extract(configApp.globalSlc),t.footer=Jsn.extract(configApp.footerSlc),t.contacts=Jsn.extractN(configApp.contactsSlc),t.pages=Jsn.extractN(configApp.pagesSlc),t.posts=Jsn.extractN(configApp.postsSlc),$(configApp.sourceTxtareaSel).val(JSON.stringify(t)),Jsn.validate(),t},Jsn["import"]=function(t,n){"use strict";$.each(t,function(t,c){$(n).find("span > input[name="+t+"]").each(function(){"checkbox"===$(this).attr("type")?this.checked=c:$(this).val(c)}),$(n).find("span > textarea[name="+t+"]").each(function(){"checkbox"===$(this).attr("type")?this.checked=c:$(this).val(c)})})},Jsn.toSettings=function(){"use strict";Jsn.validate();var t=jQuery.parseJSON($(configApp.sourceTxtareaSel).val());return Jsn["import"](t.global,configApp.globalSlc),Jsn["import"](t.footer,configApp.footerSlc),$(configApp.postsId).empty(),$(configApp.pagesId).empty(),$(configApp.contactsId).empty(),$.each(t.contacts,function(t,n){Actions.addNewContact(),Jsn["import"](n,$(configApp.contactsSlc)[t])}),$.each(t.posts,function(t,n){Actions.addNewPost(),Jsn["import"](n,$(configApp.postsSlc)[t])}),$.each(t.pages,function(t,n){Actions.addNewPage(),Jsn["import"](n,$(configApp.pagesSlc)[t])}),Actions.removeBtnAction(),t},Actions.removeBtnAction=function(){"use strict";$("button[name=remove]").click(function(){$(this).parent().parent().remove()})},Actions.addNewContact=function(){"use strict";$(configApp.contactsId).append($(configApp.contactTempId).html()),Actions.removeBtnAction()},Actions.addNewPage=function(){"use strict";$(configApp.pagesId).append($(configApp.pageTempId).html()),Actions.removeBtnAction()},Actions.addNewPost=function(){"use strict";$(configApp.postsId).append($(configApp.postTempId).html()),Actions.removeBtnAction()},$(document).ready(function(){"use strict";$(configApp.validateBtnId).click(Jsn.validate),$(configApp.toJSONBtnId).click(Jsn.toJSON),$(configApp.toSettingsBtnId).click(Jsn.toSettings),$(configApp.newContactId+" > button").click(function(){Actions.addNewContact()}),$(configApp.newPageId+" > button").click(function(){Actions.addNewPage()}),$(configApp.newPostId+" > button").click(function(){Actions.addNewPost()}),$.getJSON("content.json",function(t){$(configApp.sourceTxtareaSel).val(JSON.stringify(t)),Jsn.toSettings()})});